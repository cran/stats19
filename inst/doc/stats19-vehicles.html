<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Researching vehicles involved in collisions with STATS19 data</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Researching vehicles involved in collisions with STATS19 data</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stats19)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<div id="vehicle-level-variables-in-the-stats19-datasets" class="section level1">
<h1>Vehicle level variables in the STATS19 datasets</h1>
<p>Of the three dataset types in STATS19, the vehicle tables are perhaps the most revealing yet under-explored. They look like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">=</span> <span class="fu">get_stats19</span>(<span class="at">year =</span> <span class="dv">2018</span>, <span class="at">type =</span> <span class="st">&quot;vehicles&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Files identified: dftRoadSafetyData_Vehicles_2018.csv</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    http://data.dft.gov.uk.s3.amazonaws.com/road-accidents-safety-data/dftRoadSafetyData_Vehicles_2018.csv</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data already exists in data_dir, not downloading</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data saved at ~/stats19-data/dftRoadSafetyData_Vehicles_2018.csv</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>v</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 226,409 x 23</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    accident_index vehicle_reference vehicle_type             towing_and_articul…</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                      &lt;int&gt; &lt;chr&gt;                    &lt;chr&gt;              </span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 2018010080971                  1 Car                      No tow/articulation</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 2018010080971                  2 Taxi/Private hire car    No tow/articulation</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 2018010080973                  1 Car                      No tow/articulation</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 2018010080974                  1 Taxi/Private hire car    No tow/articulation</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 2018010080974                  2 Car                      No tow/articulation</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 2018010080981                  1 Car                      No tow/articulation</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 2018010080981                  2 Van / Goods 3.5 tonnes … No tow/articulation</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 2018010080982                  1 Taxi/Private hire car    No tow/articulation</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 2018010080982                  2 Car                      No tow/articulation</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 2018010080983                  1 Car                      No tow/articulation</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 226,399 more rows, and 19 more variables: vehicle_manoeuvre &lt;chr&gt;,</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   vehicle_location_restricted_lane &lt;int&gt;, junction_location &lt;chr&gt;,</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   skidding_and_overturning &lt;chr&gt;, hit_object_in_carriageway &lt;int&gt;,</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   vehicle_leaving_carriageway &lt;int&gt;, hit_object_off_carriageway &lt;int&gt;,</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   first_point_of_impact &lt;chr&gt;, was_vehicle_left_hand_drive &lt;chr&gt;,</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   journey_purpose_of_driver &lt;chr&gt;, sex_of_driver &lt;chr&gt;, age_of_driver &lt;int&gt;,</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_band_of_driver &lt;int&gt;, engine_capacity_cc &lt;int&gt;, propulsion_code &lt;chr&gt;,</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   age_of_vehicle &lt;int&gt;, driver_imd_decile &lt;chr&gt;, driver_home_area_type &lt;int&gt;,</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   vehicle_imd_decile &lt;int&gt;</span></span></code></pre></div>
<p>We will categorise the vehicle types to simplify subsequent results:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">=</span> v <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">vehicle_type2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">&quot;motorcycle&quot;</span>, vehicle_type, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">&quot;Motorbike&quot;</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">&quot;Car&quot;</span>, vehicle_type, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">&quot;Car&quot;</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">&quot;Bus&quot;</span>, vehicle_type, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">&quot;Bus&quot;</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">&quot;cycle&quot;</span>, vehicle_type, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">&quot;Cycle&quot;</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># grepl(pattern = &quot;Van&quot;, vehicle_type, ignore.case = TRUE) ~ &quot;Van&quot;,</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">&quot;Goods&quot;</span>, vehicle_type, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">&quot;Goods&quot;</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Other&quot;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># barplot(table(v$vehicle_type2))</span></span></code></pre></div>
<p>All of these variables are of potential interest to road safety researchers. Let’s take a look at summaries of a few of them:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(v<span class="sc">$</span>vehicle_type2)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       Bus       Car     Cycle     Goods Motorbike     Other </span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      4918    164645     18125     18020     17890      2811</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(v<span class="sc">$</span>age_of_driver)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   -1.00   23.00   35.00   35.52   50.00  101.00</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(v<span class="sc">$</span>engine_capacity_cc)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      -1     125    1398    1444    1956   99999</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(v<span class="sc">$</span>propulsion_code)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Electric  Electric diesel              Gas      Gas/Bi-fuel </span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              266               67               31              130 </span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        Heavy oil  Hybrid electric           Petrol Petrol/Gas (LPG) </span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            77109             3821            93644               29</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(v<span class="sc">$</span>age_of_vehicle)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  -1.000  -1.000   5.000   5.727  10.000  84.000</span></span></code></pre></div>
<p>The output shows vehicle type (a wide range of vehicles are represented), age of driver (with young and elderly drivers often seen as more risky), engine capacity and populsion (related to vehicle type and size) and age of vehicle. In addition to these factors appearing in prior road safety research and debate, they are also things that policy makers can influence, e.g by:</p>
<ul>
<li>Encouraging modal shift away more dangerous modes and towards safer modes</li>
<li>Incentivising people in particular risk categories to use safer modes</li>
<li>Encouraging use of certain (safer) kinds of vehicle, e.g. with tax policies</li>
</ul>
</div>
<div id="relationships-between-vehicle-type-and-crash-severity" class="section level1">
<h1>Relationships between vehicle type and crash severity</h1>
<p>To explore the relationship between vehicles and crash severity, we must first join on the ‘accidents’ table:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="fu">get_stats19</span>(<span class="at">year =</span> <span class="dv">2018</span>, <span class="at">type =</span> <span class="st">&quot;accidents&quot;</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Files identified: dftRoadSafetyData_Accidents_2018.csv</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    http://data.dft.gov.uk.s3.amazonaws.com/road-accidents-safety-data/dftRoadSafetyData_Accidents_2018.csv</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data already exists in data_dir, not downloading</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Data saved at ~/stats19-data/dftRoadSafetyData_Accidents_2018.csv</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Reading in:</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ~/stats19-data/dftRoadSafetyData_Accidents_2018.csv</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; date and time columns present, creating formatted datetime column</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>va <span class="ot">=</span> dplyr<span class="sc">::</span><span class="fu">inner_join</span>(v, a)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Joining, by = &quot;accident_index&quot;</span></span></code></pre></div>
<p>Now we have additional variables available to us:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(v)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 226409     24</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(va)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 226409     56</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(va)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;accident_index&quot;                             </span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2] &quot;vehicle_reference&quot;                          </span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3] &quot;vehicle_type&quot;                               </span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;towing_and_articulation&quot;                    </span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] &quot;vehicle_manoeuvre&quot;                          </span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6] &quot;vehicle_location_restricted_lane&quot;           </span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;junction_location&quot;                          </span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8] &quot;skidding_and_overturning&quot;                   </span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] &quot;hit_object_in_carriageway&quot;                  </span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] &quot;vehicle_leaving_carriageway&quot;                </span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] &quot;hit_object_off_carriageway&quot;                 </span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12] &quot;first_point_of_impact&quot;                      </span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] &quot;was_vehicle_left_hand_drive&quot;                </span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14] &quot;journey_purpose_of_driver&quot;                  </span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15] &quot;sex_of_driver&quot;                              </span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16] &quot;age_of_driver&quot;                              </span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [17] &quot;age_band_of_driver&quot;                         </span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [18] &quot;engine_capacity_cc&quot;                         </span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [19] &quot;propulsion_code&quot;                            </span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [20] &quot;age_of_vehicle&quot;                             </span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [21] &quot;driver_imd_decile&quot;                          </span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [22] &quot;driver_home_area_type&quot;                      </span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [23] &quot;vehicle_imd_decile&quot;                         </span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [24] &quot;vehicle_type2&quot;                              </span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [25] &quot;location_easting_osgr&quot;                      </span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [26] &quot;location_northing_osgr&quot;                     </span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [27] &quot;longitude&quot;                                  </span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [28] &quot;latitude&quot;                                   </span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [29] &quot;police_force&quot;                               </span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [30] &quot;accident_severity&quot;                          </span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [31] &quot;number_of_vehicles&quot;                         </span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [32] &quot;number_of_casualties&quot;                       </span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [33] &quot;date&quot;                                       </span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [34] &quot;day_of_week&quot;                                </span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [35] &quot;time&quot;                                       </span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [36] &quot;local_authority_district&quot;                   </span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [37] &quot;local_authority_highway&quot;                    </span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [38] &quot;first_road_class&quot;                           </span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [39] &quot;first_road_number&quot;                          </span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [40] &quot;road_type&quot;                                  </span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [41] &quot;speed_limit&quot;                                </span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [42] &quot;junction_detail&quot;                            </span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [43] &quot;junction_control&quot;                           </span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [44] &quot;second_road_class&quot;                          </span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [45] &quot;second_road_number&quot;                         </span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [46] &quot;pedestrian_crossing_human_control&quot;          </span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [47] &quot;pedestrian_crossing_physical_facilities&quot;    </span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [48] &quot;light_conditions&quot;                           </span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [49] &quot;weather_conditions&quot;                         </span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [50] &quot;road_surface_conditions&quot;                    </span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [51] &quot;special_conditions_at_site&quot;                 </span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [52] &quot;carriageway_hazards&quot;                        </span></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [53] &quot;urban_or_rural_area&quot;                        </span></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [54] &quot;did_police_officer_attend_scene_of_accident&quot;</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [55] &quot;lsoa_of_accident_location&quot;                  </span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [56] &quot;datetime&quot;</span></span></code></pre></div>
<p>Let’s see how crash severity relates to the variables of interest mentioned above:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span>vehicle_type2 <span class="sc">+</span> accident_severity, <span class="at">data =</span> va) <span class="sc">%&gt;%</span> <span class="fu">prop.table</span>()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              accident_severity</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; vehicle_type2        Fatal      Serious       Slight</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Bus       0.0002605903 0.0035820131 0.0178791479</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Car       0.0082063876 0.1146465026 0.6043487671</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Cycle     0.0004814296 0.0174993044 0.0620735041</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Goods     0.0020626389 0.0144075545 0.0631202823</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Motorbike 0.0017181296 0.0259574487 0.0513407153</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Other     0.0004019275 0.0025308181 0.0094828386</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span>vehicle_type2 <span class="sc">+</span> accident_severity, <span class="at">data =</span> va) <span class="sc">%&gt;%</span> <span class="fu">prop.table</span>() <span class="sc">%&gt;%</span> <span class="fu">plot</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="100%" /></p>
<p>As expected, crashes involving large vehicles such as buses and good vehicles tend to be more serious (involve proportionally more deaths) than crashes involving smaller vehicles.</p>
<p>To focus only on cars, we can filter the <code>va</code> table as follows:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>vac <span class="ot">=</span> va <span class="sc">%&gt;%</span> <span class="fu">filter</span>(vehicle_type2 <span class="sc">==</span> <span class="st">&quot;Car&quot;</span>)</span></code></pre></div>
<p>The best proxy we have for car type in the open STATS19 data (there are non-open versions of the data with additional columns) is engine capacity, measured in cubic centimetres (cc). The distribution of engine cc’s in the cars dataset created above is shown below.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vac<span class="sc">$</span>engine_capacity_cc)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      -1    1198    1560    1440    1968   19997</span></span></code></pre></div>
<p>The output shows that there are some impossible values in the data, likely due to recording error. Very few cars have an engine capacity above 5 litres (5000 cc) and we can be confident that none have an engine capacity below 300 cc. We’ll identify these records and remove them as follows:</p>
<p>We have set the anomolous vehicle size data to NA meaning it will not be used in the subsequent analysis.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
